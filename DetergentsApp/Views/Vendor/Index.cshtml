@model IEnumerable<DetergentsApp.Models.Vendor>

@{
    ViewBag.Title = "Index";
}
@{
    TempData["vendorID"] = ViewBag.vendorID;
}
@{
    TempData["ArticleEAN"] = ViewBag.EAN;
}
@{
    TempData["sheetTypeID"] = ViewBag.SheetTypeID;
}
@{
    TempData["vendorName"] = ViewBag.vendorName;
}

<h2>Index</h2>

<section class="well">
    <h2 class="ra-well-title">Vendor Upload</h2>
    <div class="form-horizontal form-widgets col-sm-6">
        <div class="form-group">
            <label class="control-label col-sm-4" for="name">Vendor Name</label>
            <div class="col-sm-8 col-md-6">
                @(Html.Kendo().TextBox()
                    .Name("vendorName"))

            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="companyID">Vendor ID</label>
            <div class="col-sm-8 col-md-6">
                @(Html.Kendo().TextBox()
                    .Name("vendorID"))
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="articleEAN">Article EAN</label>
            <div class="col-sm-8 col-md-6">
                @(Html.Kendo().DropDownList()
                    .Name("articleEAN")
                    .DataTextField("Text")
                    .DataValueField("Value")
                    .MinLength(3)
                    .Filter(FilterType.Contains)
                    .OptionLabel("Enter EAN...")
                    .HtmlAttributes(new {style = "width: 400px;"})
                    .DataSource(ds => { ds.Read(read => read.Action("vendorEANDropDownList", "Home")); }))
            </div>


        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="gender">Sheet Type</label>
            <div class="col-sm-8 col-md-6">
                @(Html.Kendo().DropDownList()
                    .Name("sheetTypeCategory")
                    .DataTextField("Text")
                    .DataValueField("Value")
                    .HtmlAttributes(new {style = "width: 400px;"})
                    .DataSource(ds => { ds.Read(read => read.Action("sheetType_Categories", "Home")); }))
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-sm-4" for="language">Language of the file</label>
            <div class="col-sm-8 col-md-6">
                @(Html.Kendo().DropDownList()
                    .Name("language")
                    .DataTextField("Text")
                    .DataValueField("Value")
                    .Value("English")
                    .BindTo(new List<SelectListItem>
                    {
                        new SelectListItem
                        {
                            Text = "Danish",
                            Value = "Danish"
                        },
                        new SelectListItem
                        {
                            Text = "German",
                            Value = "German"
                        },
                        new SelectListItem
                        {
                            Text = "English",
                            Value = "English"
                        },
                        new SelectListItem
                        {
                            Text = "Polish",
                            Value = "Polish"
                        }
                    })
                    )
            </div>
        </div>
    </div>

    <div class="clearfix"></div>


    <div class="form-horizontal form-widgets col-sm-12">
        <div class="form-group">
            <label class="control-label col-sm-2" for="fileUpload">File Upload</label>
            <div class="col-sm-10">
                @(Html.Kendo().Upload()
                    .Name("files")
                    
                    .Async(a => a.Save("VendorSave", "FileUpload")
                        .AutoUpload(false)
                    )
                    )
                <p style="padding-top: 1em; text-align: right">
                    <button type="submit" class="k-button k-primary">Submit</button>
                </p>
            </div>
        </div>
    </div>
    <div class="form-horizontal form-widgets col-sm-12">
        <div class="form-group">
            <label class="control-label col-sm-2" for="fileUpload">File Upload</label>
            <div class="col-sm-10">
                @(Html.Kendo().Button()
                    .Name("files")
                    .Events(e => e.Click("onUploadSuccess"))
                    )
            </div>
        </div>
    </div>

    <div class="buttons-wrap">
        <button class="k-button k-state-default">Cancel</button>
        <button class="k-button k-state-default">Upload</button>
    </div>
</section>

<script>


function onUploadSuccess(e) {
        var textboxName = $("#vendorName").data("kendoTextBox").value();
        var textboxID = $("#vendorID").data("kendoTextBox").value();
        var textboxEAN = $("#articleEAN").data("kendoDropDownList").value();
        var textboxSheetType = $("#sheetTypeCategory").data("kendoDropDownList").value();
        window.location.href = "@Url.Action("VendorSave",
                                    "FileUpload")?vendorName=" + textboxName 
                                    + "&vendorID=" + textboxID 
                                    + "&articleEAN=" + textboxEAN 
                                    + "&sheetType=" + textboxSheetType;
                                    
        console.log(textboxName);
        console.log(textboxID);
        console.log(textboxEAN);
        console.log(textboxSheetType);
    }



</script>